  <div class="row" ng-hide="usageReportsUtils.anySubmittedUsageReports(affiliate) || affiliate.application.approvalState === 'REJECTED'">
    <div class="col-sm-12 col-md-12 col-lg-12">
      <div class="alert alert-danger space" role="alert">
        <div><strong>Usage Declaration Required</strong></div>
        <p>You have not submitted a usage declaration. To complete your affiliate registration, please submit an existing or new usage declaration.</p>
      </div>
    </div>
  </div>

  <div class="row space" ng-show="affiliate.application.approvalState === 'CHANGE_REQUESTED'">
    <div class="col-sm-12 col-md-12 col-lg-12">
      <div class="alert alert-warning" role="alert">
        <div><strong>Affiliate Registration Requires Change</strong></div>
        <p>Your affiliate registration needs to be updated before it can processed. Please see email regarding the necessary changes to complete your registration.</p>
      </div>
    </div>
  </div>

  <div class="row" ng-show="affiliate.application.approvalState === 'REJECTED'">
    <div class="col-sm-12 col-md-12 col-lg-12">
      <div class="alert alert-danger" role="alert">
        <div><strong>Affiliate Registration Declined</strong></div>
        <p>Your affiliate registration has been declined. Please see email regarding the details of the decision.</p>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12 col-md-12 col-lg-12">
     <div class="page-header">
      <h1>Welcome {{firstName}} {{lastName}}</h1> 
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-4"
  	ng-controller="UsageReportsTableController"> 
    <div class="panel panel-default dashboard">
  <div class="panel-heading">
     <span class="pull-right"><button class="btn btn-success btn-xs" ng-click="usageReportsUtils.openAddUsageReportModal(affiliate)"><i class="fa fa-plus"></i> New Report</button></span>
    <h3 class="panel-title">Usage Reports
    	<button ng-click="viewUsageReports()" class="btn btn-link btn-xs">View All <i class="fa fa-angle-double-right"></i></button>
    </h3>
  </div>
  <div class="table-responsive">
    <table class="table table-striped">
		      <thead> 
		        <tr>
		          <th>Report Date</th>
		          <th>Hospitals</th>
		          <th>Practices</th>
		        </tr>
		      </thead>
		      <tbody> 
		        <tr
		        	ng-repeat="usageReport in affiliate.commercialUsages | orderBy:'-startDate'"
					ng-click="usageReportsUtils.goToUsageReport(usageReport)" 
					ng-class="{highlight:usageReportsUtils.isUsageReportWaitingForApplicant(usageReport)}"
		        	>
		          <td> 
		          		<span class="btn-link" tooltip-placement="top">
		          			<span  tooltip="Declaration has not been submitted" 
		          				tooltip-placement="top"
			          			ng-show="usageReportsUtils.isUsageReportWaitingForApplicant(usageReport)"  
		          				>
		          				<i class="fa fa-exclamation-circle"></i>
	          				</span>
			            	{{usageReport.startDate | date : 'MMM'}} - {{usageReport.endDate | date : 'MMM'}} {{usageReport.startDate | date : 'yyyy'}}
		          		</span>
		          </td>
		          <td>
		            <span class="btn-link">
		            	{{usageReportsUtils.usageReportHospitals(usageReport)}}
		            </span>
		          </td>
		          <td>
		            <span class="btn-link">
		            	{{usageReportsUtils.usageReportPractices(usageReport)}}
		            </span>
		          </td>
		        </tr>
		      </tbody>
		    </table>

  </div>
</div>
  </div>
  <div class="col-lg-4">

<div class="panel panel-default dashboard">
  <div class="panel-heading">
    <h3 class="panel-title">Applications</h3>
  </div>
  <div class="table-responsive">
    <table class="table table-striped">
      <thead> 
        <tr>
          <th>Type</th>
          <th>Date</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody> 
        <tr ng-repeat="application in affiliate.applications | orderBy: [orderByApprovalState, orderByApplicationType]">
          <td>{{application.applicationType | enum:'application.applicationType.'}}</td>
          <td>{{(application.completedAt || application.submittedAt) | date }}</td>
          <td>
          	<p ng-class="{'text-warning':isApplicationPending(application), 'text-danger':isApplicationWaitingForApplicant(application)}">
          		<strong>{{application.approvalState | enum:'approval.state.'}}</strong>
          	  <a href="#/extensionApplication/{{application.applicationId}}" ng-show="application.applicationType === 'EXTENSION'">{{isApplicationWaitingForApplicant(application)?'Continue':'View'}}</a>
         	</p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
</div>
  <div class="col-lg-4">
    <div class="panel panel-default dashboard">
  <div class="panel-heading">
    <h3 class="panel-title">Account Information</h3>
       <a ng-show="isApplicationWaitingForApplicant(affiliate.application)" class="btn btn-default" href="#/affiliateRegistration">Edit Affiliate Application</a>
  </div>
  <div class="panel-body">
	<ul class="list-group">
		<li class="list-group-item"><strong>Type:</strong> {{affiliate.affiliateDetails.type | enum:'affiliate.type.'}}</li>
		<li class="list-group-item">
			<strong>Subtype:</strong> {{affiliate.affiliateDetails.subType | enum:'affiliate.subType.'}}
			<span ng-show="affiliate.affiliateDetails.type == 'OTHER'">{{affiliate.affiliateDetails.otherText}}</span>
		</li>
		<li class="list-group-item"><strong>Agreement Type:</strong> {{affiliate.affiliateDetails.agreementType |  enum:'affiliate.agreementType.'}}</li>
	</ul>
    <span class="alert alert-warning btn-block" ng-show="isApplicationPending(affiliate.application)">
      <strong>Application Status:</strong> Pending Approval</span>
    <span class="alert alert-success btn-block" ng-show="affiliate.application.approvalState === 'APPROVED'">
      <strong>Application Status:</strong> Approved</span>
  </div>
</div>

</div>

</div>


<div class="row">
  <div class="col-lg-12">
	  <div class="page-header">
	    <h1>
	     Release Packages <a href="#/viewReleases"class="btn btn-link">View All <i class="fa fa-angle-double-right"></i></a>
	   </h1> 
	 </div>
	</div>
</div>

<div class="row" ng-repeat="memberReleases in approvedReleasePackagesByMember | orderBy: releasePackageOrderBy">
	 <div class="col-lg-12">
	  <h3>{{memberReleases.packages[0].member.key | enum:'global.member.'}} <button class="btn-sm btn-link" ng-click="viewLicence(memberReleases.packages[0].member.key)">View Licence</button></h3>
	</div>
	<div class="col-md-4" ng-repeat="releasePackage in memberReleases.packages | orderBy:packageUtils.getLatestPublishedDate:true | filter: packageUtils.isPackagePublished">
		<div class="well package" ng-repeat="releaseVersion in releasePackage.releaseVersions" ng-show="packageUtils.isVersionOnline(releaseVersion) && packageUtils.isLatestVersion(releaseVersion, releasePackage.releaseVersions)">
		    <h3 ng-click="goToViewPackagePage(releasePackage.releasePackageId)">{{releasePackage.name}}  </h3>
		    <p>Current: {{releaseVersion.publishedAt | date:'medium'}}</p>
		    <p ng-repeat="releaseFile in releaseVersion.releaseFiles | orderBy: 'label'">
		 		<i class="fa fa-file"></i>  <a class="btn btn-link" href="{{releaseFile.clientDownloadUrl}}">{{releaseFile.label}}</a>
		 	</p>
		</div>
	</div>
</div>

<div class="row" ng-show="notApprovedReleasePackagesByMember" ng-show="notApprovedReleasePackagesByMember">
	 <div class="col-lg-12">
	 	<h3>Other Available Releases</h3>
	 </div>
	<div ng-repeat="memberReleases in notApprovedReleasePackagesByMember | orderBy: releasePackageOrderBy">
		<a href="#/viewReleases"class="btn btn-link">{{memberReleases.packages[0].member.key | enum:'global.member.'}}</a>
	</div>
</div>
