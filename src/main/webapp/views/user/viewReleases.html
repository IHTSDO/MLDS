
<div class="row">
	<div class="col-sm-12 col-md-12 col-lg-12"> 
		<div class="page-header">
			<h1>SNOMED CT - Downloads</h1>
		</div>
	</div>
</div>

<div ng-repeat="memberReleases in releasePackagesByMember | orderBy: releasePackageOrderBy">
	<div class="row" ng-show="$index === 1">
		<div class="col-sm-12 col-md-12 col-lg-12">
			<hr>
			<h2>Member Country Extension Releases</h2>
			<p>If the country you're looking for is not in this list, please refer to the <a href="http://www.ihtsdo.org/">IHTSDO website</a>
			for release download information.</p>  
		</div>
	</div>
		
	<div class="row">
		<div class="col-sm-12 col-md-12 col-lg-12">
			<div>
				<h2>
					{{memberReleases.packages[0].member.key | enum:'global.member.'}} 
					<a class="btn-sm btn-link" ng-click="viewLicence(memberReleases.packages[0].member.key)">View Licence</a>
				</h2>
			</div>
		</div>
	</div>
	<div class="row" ng-repeat="releasePackage in memberReleases.packages | orderBy:utils.getLatestPublishedDate:true | filter: utils.isPackagePublished" ng-controller="ViewReleaseController">
		<div class="col-sm-12 col-md-12 col-lg-12"> 
		
		<div class="panel panel-primary">	
		<div class="panel-heading">	
		<div ng-class="{'status text-muted': !isMembershipApproved}">
			<div ng-show="$root.authenticated">
				<span class="btn btn-warning pull-right" ng-show="!isPrimaryApplicationApproved">Primary application is being processed</span>
				<button class="btn btn-success pull-right" ng-show="isMembershipUnstarted && isPrimaryApplicationApproved && !isIHTSDOPackage" ng-click="utils.openExtensionApplication(releasePackage)">			
					Apply for extension
				</button>
				<span class="btn btn-warning pull-right" ng-show="isMembershipIncomplete && !isApplicationWaitingForApplicant && isPrimaryApplicationApproved && !isIHTSDOPackage">Application being processed</span>
				<span class="btn btn-warning pull-right" ng-show="isMembershipIncomplete && isApplicationWaitingForApplicant && !isIHTSDOPackage">
					Application being updated, 
					<span ng-click="goToExtensionApplication()" class="btn btn-link">click to view application.</span>
				</span>
			</div>
			<div ng-show="isMembershipApproved">
				<h3 class="panel-title" ng-click="goToViewPackagePage(releasePackage.releasePackageId)" ng-disabled="!isMembershipApproved">{{releasePackage.name}}</h3>
			</div>
			<div ng-show="!isMembershipApproved">
				<h3 class="panel-title">{{releasePackage.name}}</h3>
			</div>
			</div>
		</div>
		  <div class="panel-body">
		   {{releasePackage.description}}
		  </div>
		  <div class="panel-footer">
		   <div class="row" ng-repeat="version in releasePackage.releaseVersions | filter: utils.isVersionOnline"
					ng-show="utils.isLatestVersion(version, (releasePackage.releaseVersions | filter: utils.isVersionOnline))">
				<div class="col-lg-1">
					<div class="btn btn-success btn-sm">Current: </div>
				</div>
				<div class="col-lg-11" ng-repeat="releaseFile in version.releaseFiles">
					<h4 class="version">{{version.name}}</h4>
						<i class="fa fa-file"></i>
						<span ng-show="releaseFile.clientDownloadUrl && isMembershipApproved">
							<a href="{{releaseFile.clientDownloadUrl}}" class="btn btn-link" target="_blank">{{releaseFile.label}}</a>
						</span>
						<span ng-show="!(releaseFile.clientDownloadUrl && isMembershipApproved)">
							{{releaseFile.label}}
						</span>
				</div>
			</div>
		</div>
		
		</div>


<div ng-show="releasePackagesByMember.length == 0">
	<div class="alert alert-warning">
		<i class="fa fa-exclamation-circle"></i> There are currently no release packages available.
	</div>
</div>