<form novalidate="" name="affiliateApplicationForm" ng-submit="affiliateform.submit()" bs-validation="" id="affiliateApplicationForm">
  <div class="container">
    <div class="col-sx-12 col-md-12">
      <div class="panel-group" id="accordion">
        <div class="panel panel-default applicant">
          <div class="panel-heading">
            <h4 class="panel-title">
              <a ng-click="collapsePanel.type = !collapsePanel.type"><span> Usage Type</span> <span class="pull-right" ng-show="collapsePanel.type">Edit</span></a>
            </h4>
          </div>
          <div id="collapseIndividual" collapse="collapsePanel.type" class="panel-collapse collapse in">
            <div class="panel-body">
              <h4>How will you be using the standard? FIXME COPY</h4>
              <div class="form-group">
                <label>Type</label> <select class="form-control input-md" name="type" ng-model="affiliateform.type" ng-change="affiliateform.usageSubType = ''; licenseeTypeChanged()" required="">
                  <option value="COMMERCIAL">Commercial</option>
                  <option value="ACADEMIC">Academic</option>
                  <option value="OTHER">Other</option>
                  <option value="INDIVIDUAL">Individual</option>
                </select>
                <p ng-show="affiliateApplicationForm.type.$error.required && affiliateApplicationForm.attempted" class="help-block">
                  Usage type field is required.
                </p>
              </div>
              <div class="form-group" ng-show="affiliateform.type && affiliateform.type!='OTHER'">
                <label>Subtype</label> 
                <select class="form-control input-md" name="usageSubType" ng-model="affiliateform.usageSubType" ng-required="affiliateform.type!='OTHER'" auto-submit>
                  <option value="Developer" ng-show="affiliateform.type=='COMMERCIAL'">Developer</option>
                  <option value="Development" ng-show="affiliateform.type=='ACADEMIC'">Development</option>
                  <option value="Educational" ng-show="affiliateform.type!='COMMERCIAL'">Educational</option>
                  <option value="Healthcare Provider" ng-show="affiliateform.type=='ACADEMIC'">Healthcare Provider</option>
                  <option value="Personal" ng-show="affiliateform.type=='INDIVIDUAL'">Personal</option>
                  <option value="Research" ng-show="affiliateform.type!='COMMERCIAL'">Research</option>
                  <option value="Vendor" ng-show="affiliateform.type=='COMMERCIAL'">Vendor</option>
                </select>
                <p ng-show="affiliateApplicationForm.usageSubType.$error.required && affiliateApplicationForm.attempted" class="help-block">
                  Subtype field is required.
                </p>
              </div>
              <div class="form-group" ng-show="affiliateform.type=='OTHER'">
                <label>Other:</label> <input type="text" class="form-control" placeholder="Other" name="usageSubType" ng-required="affiliateform.type=='OTHER'" ng-model="affiliateform.usageSubType" auto-submit>
                <p ng-show="affiliateApplicationForm.usageSubType.$error.required && affiliateApplicationForm.attempted" class="help-block">
                  Other field is required.
                </p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">
              <a ng-click="collapsePanel.contact = !collapsePanel.contact">Contact Information</a>
            </h4>
          </div>
          <div id="collapseIndividual" collapse="collapsePanel.contact" class="panel-collapse collapse in">
            <div class="panel-body">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Full Name</label> <input class="form-control" placeholder="John Smith" required="" name="contactName" ng-model="affiliateform.contact.name" auto-submit>
                    <p ng-show="affiliateApplicationForm.contactName.$error.required && affiliateApplicationForm.attempted" class="help-block">
                      Required field.
                    </p>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Email</label> <input class="form-control" type="email" placeholder="JohnSmith@OrganizationABC.com" required="" name="contactEmail" ng-model="affiliateform.contact.email" auto-submit>
                    <div ng-show="affiliateApplicationForm.attempted">
                      <p ng-show="affiliateApplicationForm.contactEmail.$error.required" class="help-block">
                        Required field.
                      </p>
                      <p ng-show="!affiliateApplicationForm.contactEmail.$error.required && affiliateApplicationForm.contactEmail.$error.email" class="help-block">
                        Invalid Email Address.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <label>Landline Phone Number</label>
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <div class="form-group">
                    <input class="form-control" type="text" ng-pattern="/^(\(?\+?[0-9]*\)?)?[0-9_\- .\(\)]*$/" placeholder="+55 123 456 7895" required="" name="contactPhone" ng-model="affiliateform.contact.phone" auto-submit>
                    <div ng-show="affiliateApplicationForm.attempted">
                      <p ng-show="affiliateApplicationForm.contactPhone.$error.required" class="help-block">
                        Required field.
                      </p>
                      <p ng-show="!affiliateApplicationForm.contactPhone.$error.required && affiliateApplicationForm.contactPhone.$invalid" class="help-block">
                        Invalid Phone Number.
                      </p>
                    </div>
                  </div>
                </div>
                <div class="col-md-2">
                  <div class="form-group">
                    <input class="form-control col-md-2" placeholder="Extension" ng-model="affiliateform.contact.extension" auto-submit>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <label>Mobile Phone Number</label>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <input class="form-control" ng-pattern="/^(\(?\+?[0-9]*\)?)?[0-9_\- .\(\)]*$/" name="mobilePhone" placeholder="+55 123 456 7895" ng-required="affiliateform.type!='INDIVIDUAL'" ng-model="affiliateform.contact.mobilePhone" auto-submit>
                    <div ng-show="affiliateApplicationForm.attempted">
                      <p ng-show="affiliateApplicationForm.mobilePhone.$error.required" class="help-block">
                        Required field.
                      </p>
                      <p ng-show="!affiliateApplicationForm.mobilePhone.$error.required && affiliateApplicationForm.mobilePhone.$invalid" class="help-block">
                        Invalid Phone Number.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div ng-show="affiliateform.type=='INDIVIDUAL'">
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Address</label> <input class="form-control" name="address" placeholder="123 Somewhere Avenue" ng-required="affiliateform.type=='INDIVIDUAL'" ng-model="affiliateform.address.street" auto-submit>
                      <p ng-show="affiliateApplicationForm.address.$error.required && affiliateApplicationForm.attempted" class="help-block">
                        Required field.
                      </p>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                    <div class="form-group">
                      <input class="form-control" name="city" placeholder="City" ng-required="affiliateform.type=='INDIVIDUAL'" ng-model="affiliateform.address.city" auto-submit>
                      <p ng-show="affiliateApplicationForm.city.$error.required && affiliateApplicationForm.attempted" class="help-block">
                        Required field.
                      </p>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="form-group">
                      <input class="form-control" type="text" ng-model="affiliateform.address.postCode" name="postCode" ng-required="affiliateform.type=='INDIVIDUAL'" placeholder="Post Code" auto-submit>
                      <p ng-show="affiliateApplicationForm.postCode.$error.required && affiliateApplicationForm.attempted" class="help-block">
                        Required field.
                      </p>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <input class="form-control" type="text" ng-model="affiliateform.address.country" name="country" ng-required="affiliateform.type=='INDIVIDUAL'" placeholder="Country" typeahead="country.commonName for country in availableCountries | filter:$viewValue | limitTo:8" auto-submit>
                      <p ng-show="affiliateApplicationForm.country.$error.required && affiliateApplicationForm.attempted" class="help-block">
                        Required field.
                      </p>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="panel panel-default" ng-show="affiliateform.type && affiliateform.type!='INDIVIDUAL'">
          <div class="panel-heading">
            <h4 class="panel-title">
              <a ng-click="collapsePanel.Organization = !collapsePanel.Organization">Organization</a>
            </h4>
          </div>
          <div id="collapsePanel.Organization" class="panel-collapse collapse in" ng-show="!collapsePanel.Organization">
            <div class="panel-body">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group has-error has-feedback">
                    <label>Organization Name</label> <input class="form-control help-block" name="organizationName" placeholder="Organization Name" ng-required="affiliateform.type!='INDIVIDUAL'" ng-model="affiliateform.organization.name" auto-submit>
                    <p class="help-block" ng-show="affiliateApplicationForm.organizationName.$error.required && affiliateApplicationForm.attempted">
                      Required field.
                    </p>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group has-error has-feedback">
                    <label>Organization Type</label> 
                     <select class="form-control" name="organizationType" ng-required="affiliateform.type!='INDIVIDUAL'" ng-model="affiliateform.organization.type" auto-submit>
                    	<option ng-repeat="organizationType in organizationTypes" value="{{organizationType.value}}">{{organizationType.name}}</option>
                    </select>
                    <p class="help-block" ng-show="affiliateApplicationForm.organizationType.$error.required && affiliateApplicationForm.attempted">
                      Required field.
                    </p>
                  </div>
                </div>
              </div>
              <div class="row" ng-show="affiliateform.organization.type=='OTHER'">
                <div class="col-md-6">
                  <div class="form-group has-error has-feedback">
                    <input class="form-control help-block" name="organizationTypeOther" placeholder="Other Organization Type" ng-required="affiliateApplicationForm.organizationType.type=='Other'" ng-model="affiliateform.organization.typeOther" auto-submit>
                    <p class="help-block" ng-show="affiliateApplicationForm.organizationTypeOther.$error.required && affiliateApplicationForm.attempted">
                      An Organization type is required.
                    </p>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Address</label> <input class="form-control" name="address" placeholder="123 Somewhere Avenue" required="" ng-model="affiliateform.address.street" auto-submit>
                    <p ng-show="affiliateApplicationForm.address.$error.required && affiliateApplicationForm.attempted" class="help-block">
                      Required field.
                    </p>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3">
                  <div class="form-group">
                    <input class="form-control" name="city" placeholder="City" required="" ng-model="affiliateform.address.city" auto-submit>
                    <p ng-show="affiliateApplicationForm.city.$error.required && affiliateApplicationForm.attempted" class="help-block">
                      Required field.
                    </p>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-group">
                    <input class="form-control" type="text" ng-model="affiliateform.address.postCode" name="postCode" ng-required="affiliateform.type=='COMMERCIAL'" placeholder="Post Code" auto-submit>
                    <p ng-show="affiliateApplicationForm.postCode.$error.required && affiliateApplicationForm.attempted" class="help-block">
                      Required field.
                    </p>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <input class="form-control" type="text" ng-model="affiliateform.address.country" name="country" required="" placeholder="Country" typeahead="country.commonName for country in availableCountries | filter:$viewValue | limitTo:8" auto-submit>
                    <p ng-show="affiliateApplicationForm.country.$error.required && affiliateApplicationForm.attempted" class="help-block">
                      Required field.
                    </p>
                    </p>
                  </div>
                </div>
              </div>
                   <hr>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Use Organization Address as Billing Address</label> <input name="use" type="checkbox" ng-change="copyAddress()" ng-model="isSameAddress">
                  </div>
                </div>
              </div>
         
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Billing Address</label> <input class="form-control" name="billingAddress" placeholder="Address" ng-disabled="isSameAddress" ng-required="affiliateform.type=='COMMERCIAL'" ng-model="affiliateform.billing.street" auto-submit>
                    <p ng-show="affiliateApplicationForm.billingAddress.$error.required && affiliateApplicationForm.attempted" class="help-block">
                      Required field.
                    </p>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3">
                  <div class="form-group">
                    <input class="form-control" name="billingCity" placeholder="City" ng-disabled="isSameAddress" ng-required="affiliateform.type=='COMMERCIAL'" ng-model="affiliateform.billing.city" auto-submit>
                    <p ng-show="affiliateApplicationForm.billingCity.$error.required && affiliateApplicationForm.attempted" class="help-block">
                      Required field.
                    </p>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-group">
                    <input class="form-control" type="text" ng-model="affiliateform.billing.postCode" name="billingPostCode" ng-disabled="isSameAddress" ng-required="affiliateform.type=='COMMERCIAL'" placeholder="Post Code" auto-submit>
                    <p ng-show="affiliateApplicationForm.billingPostCode.$error.required && affiliateApplicationForm.attempted" class="help-block">
                      Required field.
                    </p>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <input class="form-control" type="text" ng-model="affiliateform.billing.country" name="billingCountry" ng-disabled="isSameAddress" ng-required="affiliateform.type=='COMMERCIAL'" placeholder="Country" typeahead="country.commonName for country in availableCountries | filter:$viewValue | limitTo:8" auto-submit>
                    <p ng-show="affiliateApplicationForm.billingCountry.$error.required && affiliateApplicationForm.attempted" class="help-block">
                      Required field.
                    </p>
                    </p>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Alternate Email</label> <input class="form-control" type="email" placeholder="JohnSmith@OrganizationABC.com" ng-required="affiliateform.type!='INDIVIDUAL'" name="alternateEmail" ng-model="affiliateform.contact.alternateEmail" auto-submit>
                    <div ng-show="affiliateApplicationForm.attempted">
                      <p ng-show="affiliateApplicationForm.alternateEmail.$error.required" class="help-block">
                        Required field.
                      </p>
                      <p ng-show="!affiliateApplicationForm.alternateEmail.$error.required && affiliateApplicationForm.alternateEmail.$error.email" class="help-block">
                        Invalid Email Address.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row" ng-show="affiliateform.type=='COMMERCIAL'">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Third Email</label> <input class="form-control" type="email" placeholder="JohnSmith@OrganizationABC.com" ng-required="affiliateform.type=='COMMERCIAL'" name="thirdEmail" ng-model="affiliateform.contact.thirdEmail" auto-submit>
                    <div ng-show="affiliateApplicationForm.attempted">
                      <p ng-show="affiliateApplicationForm.thirdEmail.$error.required" class="help-block">
                        Required field.
                      </p>
                      <p ng-show="!affiliateApplicationForm.thirdEmail.$error.required && affiliateApplicationForm.thirdEmail.$error.email" class="help-block">
                        Invalid Email Address.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row" ng-show="affiliateform.type=='OTHER'">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Other</label> 
                    <textarea class="form-control" rows="4" name="otherText" ng-model="affiliateform.other.textArea" auto-submit></textarea>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div ng-controller="AffiliateRegistrationUsageLogController" ng-include="'views/user/affiliateRegistrationUsageLog.html'">
      </div>
      
      
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">
            SNOMED CT Agreement
          </h3>
        </div>
        <div class="panel-body">
          <p class="bg-warning text-warning">
            Licence abstract -- explain importance of terms. Describe reporting and possible $$$ obligations! FIXME - copy
          </p>
          <p>
            <a href="http://ihtsdo.org/fileadmin/user_upload/Docs_01/License/Ihtsdo_AffiliateLicenceAgreement_v11.pdf" target="_blank" class="btn btn-default btn-block">SNOMED Licence</a>
          </p>
          <p class="form-group">
            <label><input required="" type="checkbox" name="snoMedTC" required="" ng-model="affiliateform.snoMedTC"> I agree to the licence 
            <span ng-show="affiliateApplicationForm.snoMedTC.$error.required && affiliateApplicationForm.attempted" class="help-block">The license is required to access SNOMED CT.</span></label>
          </p>
          <div class="panel-footer">
            <button type="button" class="btn btn-muted btn-success" ng-click="openReviewModal(affiliateform)">Register</button>
            <div ng-show="affiliateApplicationForm.attempted" class="has-error">
							<p ng-show="affiliateApplicationForm.$invalid" class="help-block">Please fix the errors listed above.</p>
						</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form><!-- /container -->
