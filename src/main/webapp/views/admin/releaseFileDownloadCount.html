<div>
    <h2>List of Release File Download Counts Per Versions</h2>

    <div class="row">
        <div class="col-md-5">
            <h4 translate="audits.filter.title">Filter by date and exclude users</h4>
        </div>
    </div>

    <div class="row">
        <!-- Date Range Filter -->
        <div class="col-md-6">
            <div class="input-group">
                <span class="input-group-addon" translate="audits.filter.from">from</span>
                <input type="date" class="input-sm form-control" name="start" ng-model="fromDate" required/>
                <span class="input-group-addon" translate="audits.filter.to">to</span>
                <input type="date" class="input-sm form-control" name="end" ng-model="toDate" ng-change="loadUsers()" required/>
            </div>
        </div>

        <div class="col-md-6">
            <div class="input-group">
                <div class="dropdown" style="display: inline-block;">
                    <button class="btn btn-default dropdown-toggle" type="button" id="omitUsersDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        Exclude Users
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="omitUsersDropdown" style="max-height: 200px; overflow-y: auto;">
                        <li ng-repeat="user in userList">
                            <a ng-click="toggleSelection(user)" ng-style="{'background-color': omitUsers.indexOf(user) !== -1 ? '#f0f0f0' : 'inherit'}">
                                {{user}}
                                <span ng-if="omitUsers.indexOf(user) !== -1" style="font-weight: bold; font-size: 1.2em; color: red; float: right; margin-left: 10px;">&times;</span>
                            </a>
                        </li>
                    </ul>
                </div>
                <button class="btn btn-primary" style="margin-left: 10px;" ng-click="loadReleaseFileDownloadCounts()">Get Download Count</button>
            </div>
        </div>


        <div class="row">
        <div class="col-md-12">
            <div class="input-group" ng-show="submitting">
                <p class="help-block">
                    Loading..
                    <i class="fa fa-spinner fa-spin"></i>
                </p>
            </div>
            <div class="table-responsive">
                <table class="table table-condensed table-striped">
                    <caption></caption>
                    <thead>
                    <tr>
                        <th>Release Package</th>
                        <th>Release Version</th>
                        <th>Release File Name</th>
                        <th>Count</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="release in releaseFileDownloadCounts">
                        <td>{{ release.releasePackageName }}</td>
                        <td>{{ release.releaseVersionName }}</td>
                        <td>{{ release.releaseFileName }}</td>
                        <td>{{ release.count }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
</div>
