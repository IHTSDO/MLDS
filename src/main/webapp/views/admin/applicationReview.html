<div class="row">
	<div class="col-md-12">
		<div class="page-header">
		 <span class="pull-right"><a href="#/pendingApplications">Back to Pending Applications</a></span>
      	<h1> Application Review</h1>
      	      </div>
    
  </div>
</div>

    <div class="col-md-8">
      <div class="well">
      <h4><span ng-show="application.organizationName">{{application.organizationName}} - </span>
       {{application.name}}</h4>
       <p> <strong>Application Date: {{application.submittedAt | date}}</strong> </p>
       <p><strong>Status:</strong> {{'approval.state.'+application.approvalState | translate}}</p>
       <p><strong>Issue No:</strong> {{application.applicationId}}</p>
       <div ng-include="'views/admin/applicationSummaryBlock.html'"></div>
</div>
</div>
<div class="col-md-4">
	<div ng-controller="ApplicationReviewComparisonSearchController">
	<div ng-hide="showComparisonLicensee">
	<!-- Search block -->
	<script type="text/ng-template" id="views/admin/applicationReviewLicenseeSearchTemplate.html">
		<div class="well">
		<div><strong>{{match.model.application.organizationName}} {{match.model.application.fullName}}</strong></div>
		<div>{{match.model.application.address}}</div>
		<div>{{match.model.application.city}}, {{match.model.application.country}} </div>
		<div><strong>Usage Type:</strong> {{'licensee.type.'+match.model.application.type | translate}} - {{match.model.application.subType}}</div>
		<div><strong>Type of Agreement:</strong> {{'licensee.agreementType.'+match.model.application.commercialUsage.context.agreementType | translate}}</div>
		</div>
	</script>
	 <input type="text" ng-model="comparisonLicensee" placeholder="Search for existing Licensees" 
	 	typeahead="licensee as licensee.application.organizationName for licensee in getLicenseesMatching($viewValue)" 
	 	typeahead-loading="searchingLicensees"
	 	typeahead-template-url="views/admin/applicationReviewLicenseeSearchTemplate.html"
	 	typeahead-on-select="selectComparisonLicensee(licensee)" 
	 	class="form-control">
    <i ng-show="searchingLicensees" class="glyphicon glyphicon-refresh"></i>
	</div>
	<div ng-show="showComparisonLicensee" >
		<button ng-click="showComparisonLicensee = false">Dismiss</button>
       <div ng-include="'views/admin/applicationSummaryBlock.html'"></div>
	</div>
	</div>
	
   <div class="well">
	<alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>
	
  <form name="notesForm" novalidate bs-validation >
   <div class="form-group">
   		<div class="pull-right" ng-show="submitting"><i class="fa fa-spinner"></i></div>
     <label>Staff Notes</label>
     <textarea class="form-control" rows="10" required name="notesInternal" ng-model="application.notesInternal" auto-submit></textarea>
   </div>
 </form>
 <div>
 	<a class="btn btn-success btn-block" ng-click="approveApplication()">Approve Application</a>
  <a class="btn btn-warning btn-block" ng-click="changeRequested()">Change Requested from Applicant</a>
  <a class="btn btn-warning btn-block" ng-click="reviewRequested()">Review Requested from Staff</a>
  <a class="btn btn-danger btn-block" ng-click="rejectApplication()">Decline Application</a>
 </div>

 	

</div>
</div>
