<div class="row">
	<div class="col-md-12">
		<div class="page-header">
			<h2>Post Announcement</h2>
		</div>
	</div>
</div>
<div class="row">
	<form name="form" bs-validation>

		<div class="col-md-12">
			<h3>Message Content</h3>

			<div class="form-group">
				<label>Email Subject</label>
				<input class="form-control"
					placeholder="Enter Subject" name="subject"
					ng-model="announcement.subject" ng-required="true">
				<span
					ng-show="form.subject.$error.required && form.attempted"
					class="help-block">Required Field</span>
			</div>

			<div class="form-group">
				<label>Email Body</label>
				<blockquote>
					<p class="text-muted">Dear user,</p>
				</blockquote>
			</div>

			<div class="form-group">
				<div text-angular name="body" ng-model="announcement.body"
					ng-required="true"></div>
				<span ng-show="form.body.$error.required && form.attempted" class="help-block">Required Field</span>
			</div>
			
			<div class="form-group">
				<blockquote>
					<p class="text-muted">
						<u>Login to IHTSDO-MLDS</u>
					</p>
					<p class="text-muted">
						<span>Regards,</span> <br /> <em>IHTSDO-MLDS.</em>
					</p>
				</blockquote>
			</div>
		</div>

		<div class="col-md-12">
			<h3>Audience</h3>
			
			<div class="form-group">
				<label>Active affiliates of Member</label>
				<select class="form-control" name="member"
					ng-model="announcement.member"
					ng-options="m as (m.key | enum:'global.member.') for m in members track by m.key"
					ng-required="true">
				</select>
				<span ng-show="form.member.$error.required && form.attempted"
					class="help-block">Required Field</span>
			</div>
			
			<div class="form-group">
				<label>Additional Email Addresses</label>
				
				<input class="form-control" name="emails" ng-model="emailListString">
				<span class="help-block">Send the announcement to additional email addressses.</span>
			</div>
			
		</div>

		<div class="col-md-12">
			<button class="btn btn-success" ng-show="form.$invalid"
				ng-click="form.attempted = true">
				<i class="fa fa-send"></i> Post Announcement
			</button>
			<button class="btn btn-success" ng-hide="form.$invalid"
				ng-click="postAnnouncement()" ng-disabled="submitting">
				<i class="fa fa-send"></i>
				Post Announcement 
				<span ng-show="submitting"><i class="fa fa-spinner fa-spin"></i></span>
			</button>
		</div>
		
		<div class="col-md-12">
			<alert class="space" ng-repeat="alert in alerts" type="{{alert.type}}"
				close="closeAlert($index)">{{alert.msg}}</alert>
		</div>

	</form>
</div>